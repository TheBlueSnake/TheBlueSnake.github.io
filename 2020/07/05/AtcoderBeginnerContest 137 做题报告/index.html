


<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>  AtcoderBeginnerContest 137 做题报告 |    TheBlueSnake&#39;s Blog</title>
  <!-- 标签页图标 -->
  

  <!-- 图标库 -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
  <!-- 动画库 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fushaolei/cdn-white@1.0/css/animate.css"/>
  <!-- css文件 -->
  
<link rel="stylesheet" href="/css/white.css">

  <!-- 代码高亮 -->
  
<meta name="generator" content="Hexo 5.0.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


<body>

<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="menu-outer">
    <div class="menu-inner">
      <div class="menu-site-name  animate__animated  animate__fadeInUp">
        <a href="/">
          TheBlueSnake&#39;s Blog
        </a>
        
      </div>
      <div class="menu-group">
        <ul class="menu-ul">
        
          <a href="/" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              HOME
            </li>
          </a>
        
          <a href="/archives" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              BLOG
            </li>
          </a>
        
          <a href="/tags" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              TAGS
            </li>
          </a>
        
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="sort">
             Categories
             <div class="categories-outer " id="sort-div">
               <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/OI/">OI</a></li></ul>
             </div>
          </li>
        
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="mobile-menu">
            <i class="ri-menu-line"></i>
          </li>
        
        </ul>

      </div>

    </div>
</div>
<div id="mobile-main" class="animate__animated  animate__fadeIn">
  <div class="mobile-menu-inner">
    <div class="mobile-menu-site-name  animate__animated  animate__fadeInUp">
      <a href="/">
        TheBlueSnake&#39;s Blog
      </a>
    </div>
    <div class="mobile-menu-group" id="mobile-close">
      <i class="ri-close-line"></i>
    </div>

  </div>

  <div class="mobile-menu-div">
  
    <a href="/" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>HOME</span>
      </div>
    </a>
  
    <a href="/archives" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>BLOG</span>
      </div>
    </a>
  
    <a href="/tags" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>TAGS</span>
      </div>
    </a>
  
  
  </div>


</div>

<div class="body-outer">
  <div class="body-inner">
    
<article class="post-inner">
  <div class="post-content-outer">
    <div class="post-content-inner ">
      <div class="post-intro-no-cover">
        <div class="post-title animate__animated  animate__fadeInUp">AtcoderBeginnerContest 137 做题报告</div>
        <div class="meta-intro animate__animated  animate__fadeInUp"><span class="intro-span">2020年7月5日 by TheBlueSnake</span></div>
        
      </div>
      <div class="post-content-main animate__animated  animate__fadeInUp">
        <!-- 目录 -->
        
          
        
        <h3 id="A-Payment-100-points"><a href="#A-Payment-100-points" class="headerlink" title="A. Payment(100 points)"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc173/tasks/abc173_a">A. Payment</a>(100 points)</h3><p>水，将$n$对$1000$取模，结果再用$1000$减就行了。<br>因为本人过于弱，A竟然第一次做错了…<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, (<span class="number">1000</span> - n % <span class="number">1000</span>) % <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="B-Judge-Status-Summary-200-points"><a href="#B-Judge-Status-Summary-200-points" class="headerlink" title="B. Judge Status Summary(200 points)"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc173/tasks/abc173_b">B. Judge Status Summary</a>(200 points)</h3><p>还是很水，记录一下输出就行。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> cnt[<span class="number">4</span>];</span><br><span class="line"><span class="built_in">string</span> str;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="keyword">sizeof</span>(cnt));</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; str;</span><br><span class="line">        <span class="keyword">if</span>(str == <span class="string">&quot;AC&quot;</span>) cnt[<span class="number">0</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(str == <span class="string">&quot;WA&quot;</span>) cnt[<span class="number">1</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(str == <span class="string">&quot;TLE&quot;</span>) cnt[<span class="number">2</span>]++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(str == <span class="string">&quot;RE&quot;</span>) cnt[<span class="number">3</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;AC x %d\n&quot;</span>, cnt[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;WA x %d\n&quot;</span>, cnt[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;TLE x %d\n&quot;</span>, cnt[<span class="number">2</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;RE x %d\n&quot;</span>, cnt[<span class="number">3</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="C-H-and-V-300-points"><a href="#C-H-and-V-300-points" class="headerlink" title="C. H and V(300 points)"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc173/tasks/abc173_c">C. H and V</a>(300 points)</h3><p>依旧不难，枚举每一行每一列是否涂颜色，每次花$O(hw)$判断剩余黑色格子数量，也可以很快切掉。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> h, w, k, mp[MAXN][MAXM];</span><br><span class="line"><span class="keyword">int</span> row[MAXN], col[MAXM], ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">getch</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> tmps = getchar();</span><br><span class="line">    <span class="keyword">while</span>(tmps != <span class="string">&#x27;#&#x27;</span> &amp;&amp; tmps != <span class="string">&#x27;.&#x27;</span>) tmps = getchar();</span><br><span class="line">    <span class="keyword">return</span> tmps;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;h, &amp;w, &amp;k); k = -k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; h; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; w; j++)&#123;</span><br><span class="line">            mp[i][j] = getch() == <span class="string">&#x27;#&#x27;</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            k += mp[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; h; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; w; j++)</span><br><span class="line">            row[i] += mp[i][j];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; w; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; h; j++)</span><br><span class="line">            col[i] += mp[j][i];</span><br><span class="line">    ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span> &lt;&lt; h); i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; (<span class="number">1</span> &lt;&lt; w); j++)&#123;</span><br><span class="line">            <span class="keyword">int</span> tmps = k;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> pi = <span class="number">0</span>; pi &lt; h; pi++)</span><br><span class="line">                <span class="keyword">if</span>(i &amp; (<span class="number">1</span> &lt;&lt; pi)) tmps -= row[pi];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> pj = <span class="number">0</span>; pj &lt; w; pj++)</span><br><span class="line">                <span class="keyword">if</span>(j &amp; (<span class="number">1</span> &lt;&lt; pj)) tmps -= col[pj];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> pi = <span class="number">0</span>; pi &lt; h; pi++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> pj = <span class="number">0</span>; pj &lt; w; pj++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>((i &amp; (<span class="number">1</span> &lt;&lt; pi)) &amp;&amp; (j &amp; (<span class="number">1</span> &lt;&lt; pj)))</span><br><span class="line">                        tmps += mp[pi][pj];</span><br><span class="line">                &#125;</span><br><span class="line"><span class="comment">//            printf(&quot;%d %d %d\n&quot;, i, j, tmps);</span></span><br><span class="line">            <span class="keyword">if</span>(tmps == <span class="number">0</span>) ans++;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="D-Chat-in-a-Circle-400-points"><a href="#D-Chat-in-a-Circle-400-points" class="headerlink" title="D. Chat in a Circle(400 points)"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc173/tasks/abc173_d">D. Chat in a Circle</a>(400 points)</h3><p>正常做应该蛮容易想到解法的。贪心的局部最优解就是全局最优解，将所有人的友好度从大到小排序后：</p>
<script type="math/tex; mode=display">
ans = 0 + val[1] + val[2] + val[2] + val[3] + val[3] + \cdots</script><p>因为如果我们考虑将每个点都放在当前可以获得的最大值的旁边，每个最大值有左右两个可以放，且可以保证放完以后，当前放下的值左右两边都大于它，因此当前值可以作为接下来使用的最大值。既然如此，每次取用最大的位置两次，一定可以保证最终结果最大。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">200100</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line">ll n, val[MAXN &lt;&lt; <span class="number">1</span>];</span><br><span class="line">ll ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> ll &amp;x, <span class="keyword">const</span> ll &amp;y)</span></span>&#123;<span class="keyword">return</span> x &gt; y;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;val[i]);</span><br><span class="line">    sort(val + <span class="number">1</span>, val + n + <span class="number">1</span>, cmp);</span><br><span class="line">    <span class="keyword">for</span>(ll i = n; i &gt;= <span class="number">1</span>; i--) val[i &lt;&lt; <span class="number">1</span>] = val[i], val[(i &lt;&lt; <span class="number">1</span>) - <span class="number">1</span>] = val[i];</span><br><span class="line"><span class="comment">//    for(int i = 1; i &lt;= (n &lt;&lt; 1); i++) printf(&quot;%d &quot;, val[i]); printf(&quot;\n&quot;);</span></span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= n; i++) ans += val[i];</span><br><span class="line">    ans -= val[<span class="number">1</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="E-Multiplication-4-500-points"><a href="#E-Multiplication-4-500-points" class="headerlink" title="E. Multiplication 4(500 points)"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc173/tasks/abc173_e">E. Multiplication 4</a>(500 points)</h3><p>本身并不难的一道题，在不考虑正负号的情况下，我们一定选取最大的值进行乘积，得到最终的接过最大。<br>如此我们先按照绝对值大小排序，选取前$k$个项的乘积，如果符号为正，很明显当前值就是答案，对$1e9+7$取模后输出即可。<br>但是如果符号为负，那么考虑几种情况，可能是将我最后选的一个负数删掉，加上后面最近的一个正数。也有可能是将我最后选的一个正数删掉，加上我后面最近的一个负数。假设我最后选的正数是$last_positive$，最后选的负数是$last_negative$，下一个最近的正数是$next_positive$，下一个最近的负数是$next_negative$。我使用第一种换法，将负数换为正数当且仅当</p>
<script type="math/tex; mode=display">
\dfrac{next\_positive}{last\_negative}\geq\dfrac{next\_negative}{last\_positive}</script><p>转换为</p>
<script type="math/tex; mode=display">
next\_positive\times last\_positive\geq last\_negative\times next\_negative</script><p>除此之外还要考虑后面如果没有负数或者后面没有正数的情况，那么直接选择另一种。或者前面没有正数的情况，那么直接选择另一种方法。<br>并且考虑两个特例：所有数全负且$k$为奇数以及$n=k$的两种情况分别处理。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">200100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line">ll n, k, arr[MAXN], ans, flg;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">fabs</span><span class="params">(<span class="keyword">const</span> ll &amp;x)</span></span>&#123;<span class="keyword">return</span> x &lt; <span class="number">0</span> ? -x : x;&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> ll &amp;x, <span class="keyword">const</span> ll &amp;y)</span></span>&#123;<span class="keyword">return</span> <span class="built_in">fabs</span>(x) &gt; <span class="built_in">fabs</span>(y);&#125;</span><br><span class="line"><span class="function">ll <span class="title">qpow</span><span class="params">(ll x, ll pwr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(pwr == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    ll tmps = qpow(x, pwr &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(pwr &amp; <span class="number">1</span>) <span class="keyword">return</span> (tmps * tmps % MOD) * x % MOD;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> tmps * tmps % MOD;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld %lld&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;arr[i]);</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &gt; <span class="number">0</span>) flag = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(arr + <span class="number">1</span>, arr + n + <span class="number">1</span>, cmp);</span><br><span class="line">    <span class="keyword">if</span>(!flag &amp;&amp; k % <span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">        ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i = n; i &gt;= n - k + <span class="number">1</span>; i--)</span><br><span class="line">            ans = ans * arr[i] % MOD;</span><br><span class="line">        ans = (ans + MOD) % MOD;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n == k)&#123;</span><br><span class="line">        ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= k; i++) ans = ans * arr[i] % MOD;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, (ans + MOD) % MOD);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ans = <span class="number">1</span>; flg = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= k; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &lt; <span class="number">0</span>) flg = flg ^ <span class="number">1</span>;</span><br><span class="line">        ans = ans * <span class="built_in">fabs</span>(arr[i]) % MOD;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flg) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(ans == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ll next_pos = <span class="number">-1</span>, next_neg = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i = k + <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt; <span class="number">0</span> &amp;&amp; next_pos == <span class="number">-1</span>) next_pos = arr[i];</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(arr[i] &lt;= <span class="number">0</span> &amp;&amp; next_neg == <span class="number">-1</span>) next_neg = -arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        ll last_pos = <span class="number">-1</span>, last_neg = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i = k; i &gt;= <span class="number">1</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt; <span class="number">0</span> &amp;&amp; last_pos == <span class="number">-1</span>) last_pos = arr[i];</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(arr[i] &lt; <span class="number">0</span> &amp;&amp; last_neg == <span class="number">-1</span>) last_neg = -arr[i];</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        printf(&quot;:%lld %lld %lld %lld %lld\n&quot;, ans, last_pos, last_neg, next_pos, next_neg);</span></span><br><span class="line">        <span class="keyword">if</span>((last_pos == <span class="number">-1</span> || next_neg == <span class="number">-1</span>) &amp;&amp; (next_pos == <span class="number">-1</span> || last_neg == <span class="number">-1</span>)) ans = (-ans + MOD) % MOD;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(last_neg == <span class="number">-1</span> || next_pos == <span class="number">-1</span>) ans = (ans * qpow(last_pos, MOD - <span class="number">2</span>) % MOD) * next_neg % MOD;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(last_pos == <span class="number">-1</span> || next_neg == <span class="number">-1</span>) ans = (ans * qpow(last_neg, MOD - <span class="number">2</span>) % MOD) * next_pos % MOD;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(last_pos * next_pos &gt; last_neg * next_neg) ans = (ans * qpow(last_neg, MOD - <span class="number">2</span>) % MOD) * next_pos % MOD;</span><br><span class="line">        <span class="keyword">else</span> ans = (ans * qpow(last_pos, MOD - <span class="number">2</span>) % MOD) * next_neg % MOD;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>考试的时候快速幂写错了，遗憾未能AK。</p>
<h3 id="F-Intervals-on-Tree-600-points"><a href="#F-Intervals-on-Tree-600-points" class="headerlink" title="F. Intervals on Tree(600 points)"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc173/tasks/abc173_f">F. Intervals on Tree</a>(600 points)</h3><p>虽然很水，但是在全套题里是除了$E$最难的一道题了。<br>我们要计算的是</p>
<script type="math/tex; mode=display">
\sum_{L=1}^{N} \sum_{R=L}^{N} f(L, R)</script><p>其中因为题目是一棵树，所以每一次多增加一条边必定会将两个强联通分量连接为一个，所以，那么就相当于求的是集合$S$内端点数减去满足条件的边数$f(L,R)$可以拆开为</p>
<script type="math/tex; mode=display">
f(L,R)=(R-L+1)-\sum_{i=L}^R\sum_{j\in\left[ L,R \right],j\text{与}i\text{有边相连}}1</script><p>拓展到全图，点数之和为</p>
<script type="math/tex; mode=display">
A = \sum_{i=1}^ni\cdot(n-i+1)</script><p>对于每一条边，假设它左右端点为$u$和$v$（$u&lt; v$）那么我们一定有$u\times(n-v+1)$种选择会算上这条边，边数之和为：</p>
<script type="math/tex; mode=display">
B=\sum_{i\in E}u_i\cdot(n - v_i + 1)</script><p>最终答案既是$A-B$。复杂度$O(n+m)$，即$O(n)$<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">200100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">200100</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span>ll u, v; node(ll au = <span class="number">0</span>, ll av = <span class="number">0</span>)&#123;u = au; v = av;&#125;&#125;;</span><br><span class="line"></span><br><span class="line">ll n;</span><br><span class="line">node ed[MAXM];</span><br><span class="line">ll ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld %lld&quot;</span>, &amp;ed[i].u, &amp;ed[i].v);</span><br><span class="line">        <span class="keyword">if</span>(ed[i].u &gt; ed[i].v) swap(ed[i].u, ed[i].v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= n; i++) ans = ans + i * (n - i + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; i++) ans = ans - ed[i].u * (n - ed[i].v + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>最终得分$1600=100+200+300+400+600$，罚时$2\times 5min=10min$，排名$443$。</p>

        <!-- 分类文章 -->
        
          <div class="post-categoris-bottom">
            <div class="post-categoris-name">OI</div>
            <ul>
            
            
              
                <li class="me base">
                  <a  href="/2020/07/05/AtcoderBeginnerContest%20137%20%E5%81%9A%E9%A2%98%E6%8A%A5%E5%91%8A/" class="post-categoris-bottom-link">
                  AtcoderBeginnerContest 137 做题报告
                </a>
                </li>
              
              
            
            
            
              
                <li class="base">
                  <a  href="/2020/07/07/Codeforces%20Round%20651%20(Div.%202)%20%E5%81%9A%E9%A2%98%E6%8A%A5%E5%91%8A/" class="post-categoris-bottom-link">
                  Codeforces Round #651 (Div. 2) 做题报告
                </a>
                </li>
              
              
            
            
            
              
                <li class="base">
                  <a  href="/2020/07/07/Codeforces%20Round%20652%20(Div.%202)%20%E5%81%9A%E9%A2%98%E6%8A%A5%E5%91%8A/" class="post-categoris-bottom-link">
                  Codeforces Round #652 (Div. 2) 做题报告
                </a>
                </li>
              
              
            
            
            
              
                <li class="base">
                  <a  href="/2020/07/25/Codeforces%20Round%20658%20(Div.%202)%20%E5%81%9A%E9%A2%98%E6%8A%A5%E5%91%8A/" class="post-categoris-bottom-link">
                  Codeforces Round #658 (Div. 2) 做题报告
                </a>
                </li>
              
              
            
            
            
              
                <li class="base">
                  <a  href="/2020/07/25/Codeforces%20Round%20659%20(Div.%202)%20%E5%81%9A%E9%A2%98%E6%8A%A5%E5%91%8A/" class="post-categoris-bottom-link">
                  Codeforces Round #659 (Div. 2) 做题报告
                </a>
                </li>
              
              
            
            
            </ul>

          </div>

        
        <!-- 评论 -->
        
         
        
      </div>
   </div>
  </div>
</article>
  </div>
</div>

  <div class="footer-outer animate__animated  animate__fadeInUp">
    <div class="footer-inner">
    <div class="footer-text">
    <p>Power by <a target="_blank" rel="noopener" href="http://hexo.io/">Hexo</a> Theme by <a target="_blank" rel="noopener" href="https://github.com/FuShaoLei/hexo-theme-white">White</a></p>

    </div>
    <div class="footer-contact">
    <ul class="footer-ul">
        
        <li class="footer-li">
            <a href="https://github.com/TheBlueSnake" target="_blank">
                <i class="ri-github-line"></i>
            </a>
        </li>
        
    </ul>
    </div>
    </div>
</div>



<script src="/js/white.js"></script>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
